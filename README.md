# Документация по клиентскому сервису

## Описание

Этот проект представляет собой **Клиентский сервис**, разработанный с использованием **Django**, который позволяет пользователям загружать и обрабатывать аудио- и текстовые файлы, а также управлять и хранить запросы пользователей. Система интегрируется с внешними сервисами для обработки загруженных файлов и управления рабочим процессом пользователей.

## Функции

- **Регистрация и аутентификация пользователей**: Пользователи могут зарегистрироваться, войти в систему и использовать сервис через свои аккаунты.
- **Загрузка файлов**: Пользователи могут загружать аудио- и текстовые файлы, которые обрабатываются и сохраняются в стороннем сервисе (S3).
- **Управление звонками**: Система отслеживает взаимодействия пользователей (звонки) и отображает соответствующую информацию, такую как лиды, данные о клиентах и другие детали.

## Установка

### Требования

- Python 3.8+
- Django 3.x
- Django Rest Framework
- AWS SDK (boto3)
- Переменные окружения (AWS ключи и другие)

### Шаги

1. Клонируйте репозиторий:
   ```bash
   git clone <url-репозитория>
   cd <папка-проекта>

```bash
python3 -m venv venv
source venv/bin/activate  # Для Windows используйте venv\Scripts\activate
pip install -r requirements.txt
python manage.py migrate
python manage.py createsuperuser
python manage.py runserver
```

Эндпоинты
1. Главная страница
URL: /welcome/

Метод: GET

Описание: Страница приветствия, отображающая имя пользователя, который вошел в систему.

2. Загрузка аудиофайлов
URL: /audio/download/

Метод: POST

Описание: Позволяет пользователям загружать аудиофайлы (например, .wav, .mp3, .ogg). Файл сохраняется в S3, и отправляется запрос на сервис для предобработки.

Поля формы:

audio_file: Аудиофайл для загрузки.

area: Территория, к которой относится файл (например, область).

preprocessing_required: Флажок для указания необходимости предобработки.

3. Загрузка текстовых файлов
URL: /text/download/

Метод: POST

Описание: Позволяет пользователям загружать текстовые файлы (.txt). Файл сохраняется в S3, и отправляется запрос на сервис кластеризации.

Поля формы:

text_file: Текстовый файл для загрузки.

area: Территория, к которой относится файл.

4. Успешная загрузка
URL: /success/download/

Метод: GET

Описание: Страница, отображаемая после успешной загрузки файла, показывающая статус обработки.

5. Персональный список касаний
URL: /call/list/

Метод: GET

Описание: Отображает персональный список звонков с подробной информацией.

Пагинация: 5 звонков на страницу.

6. Полный список касаний
URL: /new_call/

Метод: GET

Описание: Отображает полный список всех звонков с возможностью фильтрации по пользователю, дате и статусу лида.

Пагинация: 5 звонков на страницу.

7. Редактирование записи звонка
URL: /call_item/edit/<int:pk>/

Метод: GET/POST

Описание: Позволяет пользователю редактировать детали конкретного звонка.

Параметры:

pk: ID записи звонка для редактирования.

Поля формы: Различные данные о звонке, такие как company_name, telephone, person_name и т.д.

8. Удаление записи звонка
URL: /call_item/delete/<int:pk>/

Метод: GET/POST

Описание: Позволяет пользователю удалить конкретную запись звонка.

Параметры:

pk: ID записи звонка для удаления.

Основные представления
1. SignUpView
Класс: SignUpView

Шаблон: signup.html

Описание: Позволяет новым пользователям зарегистрироваться с использованием кастомных полей (username, first_name, last_name, email, position).

Success URL: Перенаправление на главную страницу после успешной регистрации.

2. AudioDownloadView
Класс: AudioDownloadView

Шаблон: audio_download.html

Описание: Обрабатывает загрузку аудиофайлов, их сохранение в S3 и отправку запросов в внешние сервисы для предобработки.

3. TextDownloadView
Класс: TextDownloadView

Шаблон: text_download.html

Описание: Обрабатывает загрузку текстовых файлов, их сохранение в S3 и отправку запросов в сервис кластеризации.

4. CallListView
Класс: CallListView

Шаблон: call_list.html

Описание: Отображает список звонков, сделанных текущим пользователем. Список включает такие поля, как company_name, telephone, description.

Пагинация: 5 звонков на страницу.

5. NewCallListView
Класс: NewCallListView

Шаблон: new_call_list.html

Описание: Отображает все звонки с возможностью фильтрации по пользователю, дате и статусу лида.

Пагинация: 5 звонков на страницу.

Дополнительные функции
Интеграция с AWS S3: Файлы сохраняются на S3 с использованием AWS ключей, хранящихся в переменных окружения.

Интеграция с внешним API: Проект интегрируется с внешними сервисами через HTTP-запросы (с использованием библиотеки requests) для обработки загруженных файлов.

Вклад в проект
Если вы хотите внести вклад в проект, не стесняйтесь форкать репозиторий, вносить изменения и отправлять pull request. Пожалуйста, следуйте форматированию кода и добавляйте тесты, где это необходимо.

Лицензия
Этот проект лицензирован под лицензией MIT — смотрите файл LICENSE для подробностей.